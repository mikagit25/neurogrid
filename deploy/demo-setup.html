<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroGrid Provider Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .pulse-animation { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .status-online { color: #10b981; }
        .status-offline { color: #ef4444; }
        .status-busy { color: #f59e0b; }
        .earnings-chart { height: 200px; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-gray-900">NeuroGrid</h1>
                    </div>
                    <div class="ml-10 flex space-x-8">
                        <a href="/" class="text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium">Home</a>
                        <a href="/about-project" class="text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium">About</a>
                        <a href="./demo-client.html" class="text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium">Client Demo</a>
                        <a href="#" class="bg-green-100 text-green-700 px-3 py-2 rounded-md text-sm font-medium">Provider Demo</a>
                        <a href="/api/docs" class="text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium">Docs</a>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="mr-4 text-sm">
                        <span class="text-gray-600">Earnings:</span>
                        <span class="font-bold text-green-600" id="totalEarnings">$127.45</span>
                    </div>
                    <div class="text-sm text-gray-600">
                        <i class="fas fa-server mr-1"></i>
                        <span id="nodeId">node-gpu-001</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="px-4 py-6 sm:px-0">
            <h1 class="text-3xl font-bold text-gray-900">Provider Dashboard</h1>
            <p class="mt-2 text-gray-600">Monitor your compute nodes and earnings</p>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white overflow-hidden shadow rounded-lg card-hover">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-server text-green-600 text-2xl"></i>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">Active Nodes</dt>
                                <dd class="text-lg font-medium text-gray-900" id="activeNodes">2</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white overflow-hidden shadow rounded-lg card-hover">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-tasks text-blue-600 text-2xl pulse-animation"></i>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">Tasks Processed</dt>
                                <dd class="text-lg font-medium text-gray-900" id="tasksProcessed">1,247</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white overflow-hidden shadow rounded-lg card-hover">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-chart-line text-purple-600 text-2xl"></i>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">Avg Earnings/Hour</dt>
                                <dd class="text-lg font-medium text-gray-900" id="hourlyEarnings">$2.15</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white overflow-hidden shadow rounded-lg card-hover">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-clock text-yellow-600 text-2xl"></i>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">Uptime</dt>
                                <dd class="text-lg font-medium text-gray-900" id="uptime">99.7%</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Node Management -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Active Nodes -->
                <div class="bg-white shadow rounded-lg">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-medium text-gray-900">Your Compute Nodes</h3>
                            <button class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors text-sm">
                                <i class="fas fa-plus mr-2"></i>Add Node
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <div id="nodesList" class="space-y-4">
                            <!-- Nodes will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Recent Tasks -->
                <div class="bg-white shadow rounded-lg">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Recent Task Processing</h3>
                    </div>
                    <div class="overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task ID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Model</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Earnings</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="recentTasks" class="bg-white divide-y divide-gray-200">
                                    <!-- Tasks will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Earnings Summary -->
                <div class="bg-white shadow rounded-lg">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Earnings</h3>
                    </div>
                    <div class="p-6">
                        <div class="text-center mb-6">
                            <div class="text-3xl font-bold text-green-600" id="totalEarningsDisplay">$127.45</div>
                            <div class="text-sm text-gray-600 mt-1">Total earned</div>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">This Week</span>
                                <span class="font-bold text-green-600" id="weeklyEarnings">$23.80</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">This Month</span>
                                <span class="font-bold text-green-600" id="monthlyEarnings">$87.20</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Pending Payout</span>
                                <span class="font-bold text-yellow-600" id="pendingPayout">$12.35</span>
                            </div>
                        </div>

                        <div class="mt-6">
                            <canvas id="earningsChart" class="earnings-chart"></canvas>
                        </div>

                        <div class="mt-4 space-y-2">
                            <button class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors">
                                <i class="fas fa-money-bill-wave mr-2"></i>Request Payout
                            </button>
                            <button class="w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-50 transition-colors">
                                <i class="fas fa-chart-bar mr-2"></i>Detailed Analytics
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Node Setup Guide -->
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6">
                    <h4 class="font-bold text-gray-900 mb-2">🚀 Add More Nodes</h4>
                    <p class="text-sm text-gray-600 mb-4">Increase your earnings by adding more compute nodes</p>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Download NeuroGrid client</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Configure GPU settings</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Start earning automatically</span>
                        </div>
                    </div>
                    <button class="w-full mt-4 bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors text-sm">
                        <i class="fas fa-download mr-2"></i>Setup Guide
                    </button>
                </div>

                <!-- Performance Tips -->
                <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-6">
                    <h4 class="font-bold text-gray-900 mb-2">💡 Optimization Tips</h4>
                    <div class="space-y-2 text-sm text-gray-700">
                        <div>• Keep your nodes online 24/7 for maximum earnings</div>
                        <div>• Update to latest GPU drivers</div>
                        <div>• Monitor temperature and performance</div>
                        <div>• Join high-priority task queues</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Demo data for provider dashboard
        let nodes = [
            {
                id: 'node-gpu-001',
                name: 'Gaming Rig RTX 4090',
                status: 'online',
                gpu: 'RTX 4090',
                vram: '24GB',
                utilization: 78,
                temperature: 65,
                tasksCompleted: 845,
                uptime: 99.8,
                earnings: 89.45,
                currentTask: 'stable-diffusion-xl'
            },
            {
                id: 'node-gpu-002', 
                name: 'Workstation RTX 3080',
                status: 'busy',
                gpu: 'RTX 3080',
                vram: '10GB',
                utilization: 95,
                temperature: 72,
                tasksCompleted: 402,
                uptime: 96.5,
                earnings: 38.00,
                currentTask: 'llama2-13b'
            }
        ];

        let recentTasks = [
            {
                id: 'task_445_001',
                model: 'Stable Diffusion XL',
                duration: '45s',
                earnings: 0.05,
                status: 'completed',
                node: 'node-gpu-001'
            },
            {
                id: 'task_444_003',
                model: 'LLaMA 2 7B',
                duration: '23s',
                earnings: 0.003,
                status: 'completed',
                node: 'node-gpu-002'
            },
            {
                id: 'task_444_002',
                model: 'Mistral 7B',
                duration: '31s',
                earnings: 0.004,
                status: 'completed',
                node: 'node-gpu-001'
            },
            {
                id: 'task_443_005',
                model: 'Whisper Large',
                duration: '67s',
                earnings: 0.02,
                status: 'completed',
                node: 'node-gpu-002'
            }
        ];

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            renderNodes();
            renderRecentTasks();
            initializeEarningsChart();
            startLiveUpdates();
        });

        function updateStats() {
            document.getElementById('activeNodes').textContent = nodes.filter(n => n.status !== 'offline').length;
            document.getElementById('tasksProcessed').textContent = nodes.reduce((sum, node) => sum + node.tasksCompleted, 0).toLocaleString();
            document.getElementById('hourlyEarnings').textContent = '$2.15';
            document.getElementById('uptime').textContent = '99.7%';
            
            const totalEarnings = nodes.reduce((sum, node) => sum + node.earnings, 0);
            document.getElementById('totalEarnings').textContent = `$${totalEarnings.toFixed(2)}`;
            document.getElementById('totalEarningsDisplay').textContent = `$${totalEarnings.toFixed(2)}`;
        }

        function renderNodes() {
            const nodesList = document.getElementById('nodesList');
            
            nodesList.innerHTML = nodes.map(node => {
                const statusIcon = {
                    'online': '<i class="fas fa-circle text-green-500"></i>',
                    'busy': '<i class="fas fa-circle text-yellow-500"></i>',
                    'offline': '<i class="fas fa-circle text-red-500"></i>'
                };

                const statusText = {
                    'online': 'Online & Available',
                    'busy': `Processing: ${node.currentTask}`,
                    'offline': 'Offline'
                };

                return `
                    <div class="border border-gray-200 rounded-lg p-4 card-hover">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center">
                                ${statusIcon[node.status]}
                                <h4 class="ml-2 font-medium text-gray-900">${node.name}</h4>
                            </div>
                            <span class="text-sm font-bold text-green-600">$${node.earnings.toFixed(2)}</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gray-600">GPU:</span>
                                <span class="font-medium ml-1">${node.gpu}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">VRAM:</span>
                                <span class="font-medium ml-1">${node.vram}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Tasks:</span>
                                <span class="font-medium ml-1">${node.tasksCompleted}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Uptime:</span>
                                <span class="font-medium ml-1">${node.uptime}%</span>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-600">GPU Utilization</span>
                                <span class="font-medium">${node.utilization}%</span>
                            </div>
                            <div class="bg-gray-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full" style="width: ${node.utilization}%"></div>
                            </div>
                        </div>
                        
                        <div class="mt-3 flex justify-between text-sm">
                            <span class="text-gray-600">${statusText[node.status]}</span>
                            <span class="text-gray-600">Temp: ${node.temperature}°C</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderRecentTasks() {
            const tasksList = document.getElementById('recentTasks');
            
            tasksList.innerHTML = recentTasks.map(task => {
                return `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                            ${task.id}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                            ${task.model}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                            ${task.duration}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600">
                            $${task.earnings.toFixed(3)}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                ${task.status}
                            </span>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function initializeEarningsChart() {
            const ctx = document.getElementById('earningsChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Daily Earnings',
                        data: [8.50, 12.30, 9.80, 15.20, 11.40, 18.60, 14.25],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value;
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        function startLiveUpdates() {
            // Simulate live updates
            setInterval(() => {
                // Update node utilization
                nodes.forEach(node => {
                    if (node.status !== 'offline') {
                        node.utilization = Math.max(20, Math.min(100, node.utilization + (Math.random() - 0.5) * 10));
                        node.temperature = Math.max(50, Math.min(85, node.temperature + (Math.random() - 0.5) * 3));
                    }
                });
                
                renderNodes();
                
                // Occasionally add new completed tasks
                if (Math.random() < 0.3) {
                    const models = ['LLaMA 2 7B', 'Stable Diffusion XL', 'Mistral 7B', 'Whisper Large'];
                    const newTask = {
                        id: `task_${Date.now()}_${Math.floor(Math.random() * 1000)}`,
                        model: models[Math.floor(Math.random() * models.length)],
                        duration: `${Math.floor(Math.random() * 60) + 15}s`,
                        earnings: Math.random() * 0.1,
                        status: 'completed',
                        node: nodes[Math.floor(Math.random() * nodes.length)].id
                    };
                    
                    recentTasks.unshift(newTask);
                    if (recentTasks.length > 5) {
                        recentTasks.pop();
                    }
                    
                    renderRecentTasks();
                    
                    // Update earnings
                    const nodeIndex = nodes.findIndex(n => n.id === newTask.node);
                    if (nodeIndex !== -1) {
                        nodes[nodeIndex].earnings += newTask.earnings;
                        nodes[nodeIndex].tasksCompleted += 1;
                    }
                    
                    updateStats();
                }
            }, 3000);
        }
    </script>
</body>
</html>